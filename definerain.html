<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>

  <title>Defining Rain</title>
  <link rel="icon" type="image/png" href="/img/favicon.png" />
  
  <meta http-equiv="content-type" content="text/html;charset=utf-8" />

 <link rel="stylesheet" href="css/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="css/print.css" type="text/css" media="print" />
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection" />

 <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
 <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.3/themes/smoothness/jquery-ui.css">
 <script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
 <script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js"></script>
 <script type="text/javascript" src="https://www.google.com/jsapi"></script>

<!-- The script containing most of the JavaScript code to carry out the clustering -->
<script type="text/javascript" src="js/clustervisualization.js"></script>

<link href='http://fonts.googleapis.com/css?family=Ubuntu' rel='stylesheet' type='text/css'>

 <script>
    $(function() {
        // setup ul.tabs to work as tabs for each div directly under div.panes
        //console.debug("called");
        $( "#tabs" ).tabs();
    });
 </script>

</head>

<body>
    
  <div class="container">
      <div id="header" class="span-12">
	<h1>Defining The Rain</h1>
	</div>
	<div id="cloud" class="span-10"><img src="img/rain.png"></div>
	<br/>
		<h3> Automatically analysing BioRad's Digital Droplet Output.</h3>
		<br/>
		<div id="tabs">
          <ul>
            <li><a href="#tabs-1">Raison d'&ecirc;tre</a></li>
            <li><a href="#tabs-2">Analyse Your Data</a></li>
            <li><a href="#tabs-3">How it works</a></li>
          </ul>
          <div id="tabs-1">
            <p>BioRad's Digital Droplet PCR machine has a problem with rain. This is not H<sub>2</sub>O falling from clouds but droplets that are not clearly defined as negative or positive. This web page provides a JavaScript implementation of a clustering algorithm for the Digital Droplet output. This code can run in your web browser and avoids the need to send data to remote servers. It automatically classifies the droplets into positive and negative responses allowing the use of Poisson statistics to accurately call low copy numbers. The source code and some test data is freely available from <a href="https://github.com/jacobhurst/definetherain">github</a> under the MIT license.  </p>
          </div>
          <div id="tabs-2">
	    <p>Upload the positive control data to cluster and determine the cutoff to use.</p>
		<form enctype="multipart/form-data" action="javascript://console.debug('success!');" method="post">
			<input type="file" id="files" name="files[]" multiple />
			<output id="list"></output>
			<output id="kmean1"></output>
			<output id="kmean2"></output>
		    <output id="progress"></output>		
			
		</form>
		<span></span>
		
		<div id="every_chart_div" style="width: 900px; height: 500px;"></div>
		<div id="summary_positive_control" style="width:800px; height:150px;"></div>
		<div id="positive_result" style="width:800px;height:100px;"></div>
		<div id="positive_call" style="width=850px;height:300px;"></div>
		<output id="count_using_cutoff"></output>
		<div id="to_count_result" style="width:800px;height:50px;"></div>
		<div id="to_count" style="width=850px;height:300px;"></div>
		<div id="histograms"  class="span-25">
			<div id="negative_count_0" class="span-10" style="height:300px;"></div>
			<div id="positive_count_0" class="span-10" style="height:300px;"></div>
			<div id="negative_count_1" class="span-10" style="height:300px;"></div>
			<div id="positive_count_1" class="span-10" style="height:300px;"></div>
			<div id="negative_count_2" class="span-10" style="height:300px;"></div>
			<div id="positive_count_2" class="span-10" style="height:300px;"></div>
			<div id="negative_count_3" class="span-10" style="height:300px;"></div>
			<div id="positive_count_3" class="span-10" style="height:300px;"></div>
			<div id="negative_count_4" class="span-10" style="height:300px;"></div>
			<div id="positive_count_4" class="span-10" style="height:300px;"></div>
			<div id="negative_count_5" class="span-10" style="height:300px;"></div>
			<div id="positive_count_5" class="span-10" style="height:300px;"></div>
			<div id="negative_count_6" class="span-10" style="height:300px;"></div>
			<div id="positive_count_6" class="span-10" style="height:300px;"></div>
			<div id="negative_count_7" class="span-10" style="height:300px;"></div>
			<div id="positive_count_7" class="span-10" style="height:300px;"></div>
			<div id="negative_count_8" class="span-10" style="height:300px;"></div>
			<div id="positive_count_8" class="span-10" style="height:300px;"></div>
			<div id="negative_count_9" class="span-10" style="height:300px;"></div>
			<div id="positive_count_9" class="span-10" style="height:300px;"></div>
			<div id="negative_count_10" class="span-10" style="height:300px;"></div>
			<div id="positive_count_10" class="span-10" style="height:300px;"></div>
		</div>
		
		
		<script>
		
	    document.getElementById('files').addEventListener('change', handleFileSelect, false);
        document.getElementById('count_using_cutoff').addEventListener('change', handleFileSelectCount, false);

		</script>
		<div id="clusterchart">
		<script>
	
		
		</script>	
		</div>
      </div>
      <div id="tabs-3">
          The 
    For this method to work a positive control is needed  
      </div>
    </div>
<div>

</body>
</html>

